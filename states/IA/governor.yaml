contact_form:
  steps:
    - visit: "https://governor.iowa.gov/constituent-services/register-an-opinion"
    - fill_in:
        - name: "first_name"
          selector: "#edit-first-name"
          value: $NAME_FIRST
          required: true
        - name: "last_name"
          selector: "#edit-last-name"
          value: $NAME_LAST
          required: true
        - name: "email"
          selector: "#edit-email"
          value: $EMAIL
          required: true
        - name: "address[address]"
          selector: "#edit-address-address"
          value: $ADDRESS_STREET
          required: true
        - name: "address[address_2]"
          selector: "#edit-address-address-2"
          value: $ADDRESS_STREET_2
          required: false
        - name: "address[city]"
          selector: "#edit-address-city"
          value: $ADDRESS_CITY
          required: true
    - select:
        - name: "address[state_province]"
          selector: "#edit-address-state-province"
          value: $ADDRESS_STATE_FULL
          required: true
          options: US_STATES
    - fill_in:
        - name: "address[postal_code]"
          selector: "#edit-address-postal-code"
          value: $ADDRESS_ZIP5
          required: true
        - name: "phone"
          selector: "#edit-phone"
          value: $PHONE
          required: true
    - select:
        - name: "message_subject"
          selector: "#edit-message-subject"
          value: "Other"
          required: true
    - fill_in:
        - name: "opinion_message"
          selector: "#edit-opinion-message"
          value: $MESSAGE
          required: true
    # To prevent being detected as spam
    - wait:
        - value: 5
    - click_on:
        - value: "Submit"
          selector: "input[name='op'][type='submit'][value='Submit']"
  success:
    body:
      contains: "New submission added to Register an Opinion."
